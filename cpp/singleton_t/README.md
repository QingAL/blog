# c++ 单例模板
## 为什么需要加锁判断两次？
在 demo 中，DEMO_DEBUG 宏中包含了简单的判断单例模式，我们可以在 debugGetInstance 中使用 `sleep()` 函数简单模拟实际业务中的线程切换情况：
  1. 线程 A 调用单例，并且在判断 `mDebugInstance == nullptr;` 后挂起，进行线程切换，线程 B 执行。
  2. 线程 B 执行，并且成功执行到 `T* tmp = new T();` 并且返回。
  3. 线程 A 继续执行，因为已经执行过判断语句，因此线程 A 也 new 出一个实例并且进行赋值，和线程 B 中出现数据不一致。